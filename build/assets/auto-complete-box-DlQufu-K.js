import{_ as R}from"./app-layout-test-DySM4TLS.js";import{_ as G}from"./index-CNOzE2Vq.js";import{_ as H}from"./page-not-auth-test-DOKUi74-.js";import{_ as z}from"./page-not-found-test-CiCRdfPl.js";import{_ as A}from"./page-server-error-test-Dp3jFwWA.js";import{u as Z,a as q,b as Y,c as $,d as J,_ as K}from"./permissiom-select-tree-DM4jBFuO.js";import{_ as Q}from"./server-card-playground-6UYVpmHV.js";import{_ as W}from"./border-loading-playground-CFbwFdyM.js";import{_ as X}from"./index-DbIGBu2W.js";import{_ as ee}from"./index-BjKVfPjC.js";import{_ as se}from"./index-DMArUs-E.js";import{_ as re}from"./index-BroPEeWF.js";import{_ as oe}from"./breadcrumb-Mas4k7AM.js";import{_ as ae}from"./system-setting-BC9YyhEK.js";import{_ as te}from"./system-tabs-EMA1Y3Y1.js";import{_ as ne}from"./header-Ws0tRI04.js";import{_ as ie}from"./index-CXNGk2QG.js";import{_ as le}from"./navbar-B6LIJ0oU.js";import{_ as me}from"./vertical-header-FOqTywPR.js";import{_ as ce}from"./index-DMYeS0Bx.js";import{_ as _e}from"./login-form-DPDkwRjy.js";import{_ as de}from"./index-CYD_Yx2P.js";import{U as pe,_ as ge}from"./column-6CpnrBuv.js";import{S as xe,P as ue,a as he,b as be,C as je,c as fe,d as ve,e as ye,f as Ne,g as Ce,_ as Se}from"./select-parent-box-KmAWKOXc.js";import{j as N,q as e}from"./index-Dt0_14Pi.js";import{B as C}from"./button-Bh-1yB_S.js";import{D as Pe,a as De,b as Te,c as Le,d as Oe,e as Me,f as Ie}from"./dialog-Wt5f2YhE.js";import{I as h}from"./input-ClnY7EJI.js";import{_ as Fe,Z as Ee,u as we,a as Ue,F as ke,b as m,c,d as _,e as d,f as p,s as g,o as Ve,n as D}from"./form-C-S937J0.js";import{t as T}from"./index-D16PKcxo.js";import{T as I,a as y,_ as Be}from"./dialog-9RMWZNz0.js";import{S as Re}from"./index-DAyZiM2j.js";import{S as Ge}from"./sakura-table-bar-DzdMcMAP.js";import{_ as He}from"./colums-DPt1vHSj.js";import{_ as ze}from"./index-CthF2_Q3.js";import{_ as Ae}from"./index-BlhwFBln.js";import{_ as Ze}from"./columns-DxcJP7L3.js";import{_ as qe}from"./index-BndJxmrs.js";import{_ as Ye}from"./columns-BXaoGRbL.js";import{_ as $e}from"./index-C773cOU1.js";import{_ as Je}from"./index-DGQW_fkO.js";import{_ as Ke}from"./columns-te9LRr7I.js";import{_ as Qe}from"./index-MrWHcoKM.js";import{_ as We}from"./test-icon-select-panel-DepUKHsg.js";import{_ as Xe}from"./index-DJ8aVxXM.js";import{_ as es}from"./index-CcGQQvO8.js";import{_ as ss}from"./colums-BoUSlOlF.js";import{_ as rs}from"./dialog-BIuJhwu2.js";import{_ as os}from"./index-BfxxeTkh.js";import{_ as as}from"./index-CSCmtuFZ.js";import{c as ts}from"./utils-C3Yi2xE5.js";import{C as ns}from"./chevrons-up-down-Cy7P_uN4.js";import{C as is}from"./check-mTwESAkB.js";function ls(t){return Fe(Ee,t)}const ms=Ve({id:g().min(2,{message:"ID最短需要2个字符"}),name:g().min(2,{message:"用户名最短需要2个字符"}),label:g().min(2,{message:"标签最短需要2个字符"}),type:D().min(0).max(1),route:g().min(2,{message:"标签最短需要2个字符"}),status:D().min(0).max(1),order:ls().int(),icon:g().min(2,{message:"标签最短需要2个字符"}),component:g().min(0,{message:"标签最短需要0个字符"}),parentId:g().min(0,{message:"父亲ID最短需要0个字符"}),hide:D().min(0).max(1)});function E({open:t,onClose:i,updateItem:o,handleCreate:x,handleEdit:n,type:l}){const[u,b]=N.useState("0"),[S,j]=N.useState("1"),{data:f,isLoading:P}=Z(),{data:v,isLoading:U,setParentId:L}=q(),k=Y(),O=()=>ms,r=we({resolver:Ue(O()),defaultValues:{id:"",parentId:"",name:"",label:"",type:0,route:"",status:1,order:0,icon:"",component:"",hide:0}});N.useEffect(()=>{o?(r.reset({id:o.id||"",parentId:o.parentId||"",name:o.name||"",label:o.label||"",type:o.type||0,route:o.route||"",status:o.status||1,order:o.order||0,icon:o.icon||"",component:o.component||"",hide:o.hide?1:0}),b(String(o.type||0)),j(String(o.status||1))):(r.reset({id:"",parentId:"",name:"",label:"",type:0,route:"",status:1,order:0,icon:"",component:"",hide:0}),b("0"),j("1"))},[o,r]);const V=s=>{console.log(s);let a=O();Number(s.type)===1&&(a=a.extend({parentId:g().min(1,{message:"请选择父节点"}),component:g().min(1,{message:"请选择组件"})}));const M=a.safeParse(s);if(M.success)l=="update"?(n(s),console.log("update permission")):(x(s),console.log("create permission")),i?.();else{if(Number(s.type)===1&&!s.parentId){T.error("在视图模式下，请先选择父节点！");return}T.error("表单提交失败，请检查字段！"),console.log("验证错误:",M.error.issues)}},B=()=>{if(Number(u)===0)!P&&f&&r.setValue("id",f.data.id);else{if(!r.getValues().parentId){T.error("在视图模式下，请先选择父节点！");return}L(r.getValues().parentId),!U&&v&&r.setValue("id",v.data.id)}};return e.jsx(Pe,{open:t,onOpenChange:i,children:e.jsxs(De,{className:"sm:max-w-[800px]",children:[e.jsxs(Te,{children:[e.jsx(Le,{className:"text-foreground",children:l!=="create"?"编辑权限节点":"新增权限节点"}),e.jsx(Oe,{className:"text-foreground",children:l!=="create"?"编辑现有的权限节点":"构建新权限节点的相关信息"})]}),e.jsx(ke,{...r,children:e.jsxs("form",{id:"create-user-form",onSubmit:r.handleSubmit(V),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{control:r.control,name:"type",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"节点类型"}),e.jsx(d,{children:e.jsxs(I,{variant:"outline",type:"single",value:u,onValueChange:a=>{b(a),s.onChange(Number(a)),r.reset({...r.getValues(),parentId:"",component:""})},children:[e.jsx(y,{value:"0",children:e.jsx("p",{className:"italic text-xs ",children:"菜单"})}),e.jsx(y,{value:"1",children:e.jsx("p",{className:"italic text-xs ",children:"视图"})})]})}),e.jsx(p,{})]})}),e.jsx(m,{control:r.control,name:"status",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"状态"}),e.jsx(d,{children:e.jsxs(I,{variant:"outline",type:"single",value:S,onValueChange:a=>{j(a),s.onChange(Number(a))},children:[e.jsx(y,{value:"1",children:e.jsx("p",{className:"italic text-xs ",children:"开启"})}),e.jsx(y,{value:"0",children:e.jsx("p",{className:"italic text-xs ",children:"禁用"})})]})}),e.jsx(p,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Number(u)===1&&e.jsx(m,{control:r.control,name:"parentId",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"父节点"}),e.jsx(d,{children:e.jsx(xe,{list:k.data.data,value:s.value,onChange:a=>{s.onChange(a),L(a)}})}),e.jsx(p,{})]})}),Number(u)===1&&e.jsx(m,{control:r.control,name:"component",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"组件"}),e.jsx(d,{children:e.jsx(w,{value:s.value,onChange:s.onChange})}),e.jsx(p,{})]})})]}),e.jsx(m,{control:r.control,name:"id",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"ID"}),e.jsx(d,{children:e.jsxs("div",{className:"flex",children:[e.jsx(h,{placeholder:"输入唯一id",className:"rounded-r-none focus-visible:ring-0",...s}),e.jsx(C,{type:"button",className:"rounded-l-none w-fit p-1 bg-primary  hover:bg-primary",size:"icon",onClick:B,children:e.jsx("span",{className:"italic font-bold text-xs",children:"获取"})})]})}),e.jsx(p,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{control:r.control,name:"label",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"渲染标签"}),e.jsx(d,{children:e.jsx(h,{type:"text",placeholder:"用于浏览器显示",className:"placeholder:text-sm focus-visible:ring-primary",...s})}),e.jsx(p,{})]})}),e.jsx(m,{control:r.control,name:"name",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"名称"}),e.jsx(d,{children:e.jsx(h,{type:"text",placeholder:"输入权限点名称",className:"placeholder:text-sm focus-visible:ring-primary",...s})}),e.jsx(p,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{control:r.control,name:"route",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"路由切片"}),e.jsx(d,{children:e.jsx(h,{type:"text",placeholder:"输入此节点挂载的路由片段",className:"placeholder:text-sm focus-visible:ring-primary",...s})}),e.jsx(p,{})]})}),e.jsx(m,{control:r.control,name:"icon",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"图标"}),e.jsx(d,{children:e.jsx(h,{type:"text",placeholder:"iconfiy 图标name",className:"placeholder:text-sm focus-visible:ring-primary",...s})}),e.jsx(p,{})]})})]}),e.jsx(m,{control:r.control,name:"order",render:({field:s})=>e.jsxs(c,{children:[e.jsx(_,{className:"text-foreground",children:"顺序"}),e.jsx(d,{children:e.jsx(h,{type:"number",placeholder:"排序顺序",className:"placeholder:text-sm focus-visible:ring-primary",...s,value:String(s.value),onChange:a=>s.onChange(a.target.value)})}),e.jsx(p,{})]})})]})}),e.jsxs(Me,{children:[e.jsx(Ie,{asChild:!0,children:e.jsx(C,{variant:"outline",onClick:i,children:"取消"})}),e.jsx(C,{className:" bg-primary  hover:bg-primary ",type:"submit",form:"create-user-form",children:l==="create"?"新增":l==="update"?"更新":"追加"})]})]})})}const cs=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));function _s(){const{data:t}=$(),{handleCreatePermission:i,handleDeletePermission:o,handleEditPermission:x,handleOpenEditDialog:n,handleCloseDialog:l,handleOpenCreateDialog:u,handleOpenPushDialog:b,isCreateDialogOpen:S,isEditDialogOpen:j,editingItem:f,dialogType:P}=J(),v=pe({handleOpenEditDialog:n,handleDeletePermission:o,handleOpenPushDialog:b});return e.jsxs("div",{className:"container mx-auto",children:[e.jsx(Ge,{enableSearch:!1,enableCreate:!0,enableSelected:!1,onOpenCreateDialog:u,searchPlaceholder:"搜索名称",createButtonText:"创建权限节点"}),e.jsx(Re,{columns:v,data:t}),e.jsx(E,{open:S||j,enableSelected:!0,updateItem:f,handleCreate:i,handleEdit:x,onClose:l,type:P})]})}const ds=Object.freeze(Object.defineProperty({__proto__:null,default:_s},Symbol.toStringTag,{value:"Module"})),ps="/src/pages",gs=Object.assign({"/src/pages/Component/app-layout-test.tsx":R,"/src/pages/Component/index.tsx":G,"/src/pages/Component/page-not-auth-test.tsx":H,"/src/pages/Component/page-not-found-test.tsx":z,"/src/pages/Component/page-server-error-test.tsx":A,"/src/pages/Component/permissiom-select-tree.tsx":K,"/src/pages/Component/server-card-playground.tsx":Q,"/src/pages/CssPlayground/border-loading-playground.tsx":W,"/src/pages/CssPlayground/index.tsx":X,"/src/pages/Hero/about-project/index.tsx":ee,"/src/pages/Hero/index.tsx":se,"/src/pages/Home/index.tsx":re,"/src/pages/Layout/breadcrumb.tsx":oe,"/src/pages/Layout/components/system-setting.tsx":ae,"/src/pages/Layout/components/system-tabs.tsx":te,"/src/pages/Layout/header.tsx":ne,"/src/pages/Layout/index.tsx":ie,"/src/pages/Layout/vertical/navbar.tsx":le,"/src/pages/Layout/vertical/vertical-header.tsx":me,"/src/pages/Login/index.tsx":ce,"/src/pages/Login/login-form.tsx":_e,"/src/pages/PermissionManagement/index.tsx":de,"/src/pages/PermissionManagement/user-permission/column.tsx":ge,"/src/pages/PermissionManagement/user-permission/components/select-parent-box.tsx":Se,"/src/pages/PermissionManagement/user-permission/dialog.tsx":cs,"/src/pages/PermissionManagement/user-permission/index.tsx":ds,"/src/pages/PermissionManagement/user-role/colums.tsx":He,"/src/pages/PermissionManagement/user-role/dialog.tsx":Be,"/src/pages/PermissionManagement/user-role/index.tsx":ze,"/src/pages/Publish/index.tsx":Ae,"/src/pages/Server/achrive-list/columns.tsx":Ze,"/src/pages/Server/achrive-list/index.tsx":qe,"/src/pages/Server/baned-list/columns.tsx":Ye,"/src/pages/Server/baned-list/index.tsx":$e,"/src/pages/Server/index.tsx":Je,"/src/pages/Server/review-list/columns.tsx":Ke,"/src/pages/Server/review-list/index.tsx":Qe,"/src/pages/Test/test-icon-select-panel.tsx":We,"/src/pages/Tools/api-tool/index.tsx":Xe,"/src/pages/Tools/index.tsx":es,"/src/pages/UserManagement/admin-user-management/colums.tsx":ss,"/src/pages/UserManagement/admin-user-management/dialog.tsx":rs,"/src/pages/UserManagement/admin-user-management/index.tsx":os,"/src/pages/UserManagement/index.tsx":as}),F=Object.keys(gs).map(t=>{const i=t.replace(ps,"");return{label:i,value:i}});function w({value:t,onChange:i}){const[o,x]=N.useState(!1);return e.jsxs(ue,{open:o,onOpenChange:x,modal:!1,children:[e.jsx(he,{asChild:!0,children:e.jsxs(C,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between",children:[e.jsx("span",{className:"truncate w-[200px] lg:w-[300px]",children:t?F.find(n=>n.value===t)?.label:"选择组件"}),e.jsx(ns,{className:"opacity-50"})]})}),e.jsx(be,{className:"p-0",style:{pointerEvents:"auto"},children:e.jsxs(je,{children:[e.jsx(fe,{placeholder:"搜索节点",className:"h-9"}),e.jsxs(ve,{children:[e.jsx(ye,{children:"没有任何父节点"}),e.jsx(Ne,{children:F.map(n=>e.jsxs(Ce,{value:n.value,keywords:[n.label],onSelect:l=>{i(l===t?"":l),x(!1)},children:[n.label,e.jsx(is,{className:ts("ml-auto",t===n.value?"opacity-100":"opacity-0")})]},n.value))})]})]})})]})}const gr=Object.freeze(Object.defineProperty({__proto__:null,PageAutocomplete:w},Symbol.toStringTag,{value:"Module"}));export{cs as _,ds as a,gr as b};
